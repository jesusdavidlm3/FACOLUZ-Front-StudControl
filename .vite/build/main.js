"use strict";const h=require("electron"),k=require("node:path"),N=require("path"),P=require("child_process"),I=require("tty"),T=require("util"),G=require("fs"),L=require("net");function J(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var E={exports:{}},b={exports:{}},q={exports:{}},$,A;function V(){if(A)return $;A=1;var o=1e3,e=o*60,c=e*60,f=c*24,p=f*365.25;$=function(r,n){n=n||{};var s=typeof r;if(s==="string"&&r.length>0)return v(r);if(s==="number"&&isNaN(r)===!1)return n.long?m(r):g(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function v(r){if(r=String(r),!(r.length>100)){var n=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(r);if(n){var s=parseFloat(n[1]),l=(n[2]||"ms").toLowerCase();switch(l){case"years":case"year":case"yrs":case"yr":case"y":return s*p;case"days":case"day":case"d":return s*f;case"hours":case"hour":case"hrs":case"hr":case"h":return s*c;case"minutes":case"minute":case"mins":case"min":case"m":return s*e;case"seconds":case"second":case"secs":case"sec":case"s":return s*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}function g(r){return r>=f?Math.round(r/f)+"d":r>=c?Math.round(r/c)+"h":r>=e?Math.round(r/e)+"m":r>=o?Math.round(r/o)+"s":r+"ms"}function m(r){return a(r,f,"day")||a(r,c,"hour")||a(r,e,"minute")||a(r,o,"second")||r+" ms"}function a(r,n,s){if(!(r<n))return r<n*1.5?Math.floor(r/n)+" "+s:Math.ceil(r/n)+" "+s+"s"}return $}var D;function R(){return D||(D=1,function(o,e){e=o.exports=p.debug=p.default=p,e.coerce=a,e.disable=g,e.enable=v,e.enabled=m,e.humanize=V(),e.names=[],e.skips=[],e.formatters={};var c;function f(r){var n=0,s;for(s in r)n=(n<<5)-n+r.charCodeAt(s),n|=0;return e.colors[Math.abs(n)%e.colors.length]}function p(r){function n(){if(n.enabled){var s=n,l=+new Date,i=l-(c||l);s.diff=i,s.prev=c,s.curr=l,c=l;for(var t=new Array(arguments.length),d=0;d<t.length;d++)t[d]=arguments[d];t[0]=e.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(y,z){if(y==="%%")return y;u++;var S=e.formatters[z];if(typeof S=="function"){var F=t[u];y=S.call(s,F),t.splice(u,1),u--}return y}),e.formatArgs.call(s,t);var w=n.log||e.log||console.log.bind(console);w.apply(s,t)}}return n.namespace=r,n.enabled=e.enabled(r),n.useColors=e.useColors(),n.color=f(r),typeof e.init=="function"&&e.init(n),n}function v(r){e.save(r),e.names=[],e.skips=[];for(var n=(typeof r=="string"?r:"").split(/[\s,]+/),s=n.length,l=0;l<s;l++)n[l]&&(r=n[l].replace(/\*/g,".*?"),r[0]==="-"?e.skips.push(new RegExp("^"+r.substr(1)+"$")):e.names.push(new RegExp("^"+r+"$")))}function g(){e.enable("")}function m(r){var n,s;for(n=0,s=e.skips.length;n<s;n++)if(e.skips[n].test(r))return!1;for(n=0,s=e.names.length;n<s;n++)if(e.names[n].test(r))return!0;return!1}function a(r){return r instanceof Error?r.stack||r.message:r}}(q,q.exports)),q.exports}var B;function Z(){return B||(B=1,function(o,e){e=o.exports=R(),e.log=p,e.formatArgs=f,e.save=v,e.load=g,e.useColors=c,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:m(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function c(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(a){try{return JSON.stringify(a)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}};function f(a){var r=this.useColors;if(a[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+a[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!!r){var n="color: "+this.color;a.splice(1,0,n,"color: inherit");var s=0,l=0;a[0].replace(/%[a-zA-Z%]/g,function(i){i!=="%%"&&(s++,i==="%c"&&(l=s))}),a.splice(l,0,n)}}function p(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function v(a){try{a==null?e.storage.removeItem("debug"):e.storage.debug=a}catch{}}function g(){var a;try{a=e.storage.debug}catch{}return!a&&typeof process<"u"&&"env"in process&&(a=process.env.DEBUG),a}e.enable(g());function m(){try{return window.localStorage}catch{}}}(b,b.exports)),b.exports}var _={exports:{}},M;function H(){return M||(M=1,function(o,e){var c=I,f=T;e=o.exports=R(),e.init=l,e.log=a,e.formatArgs=m,e.save=r,e.load=n,e.useColors=g,e.colors=[6,2,3,4,5,1],e.inspectOpts=Object.keys(process.env).filter(function(i){return/^debug_/i.test(i)}).reduce(function(i,t){var d=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(w,y){return y.toUpperCase()}),u=process.env[t];return/^(yes|on|true|enabled)$/i.test(u)?u=!0:/^(no|off|false|disabled)$/i.test(u)?u=!1:u==="null"?u=null:u=Number(u),i[d]=u,i},{});var p=parseInt(process.env.DEBUG_FD,10)||2;p!==1&&p!==2&&f.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var v=p===1?process.stdout:p===2?process.stderr:s(p);function g(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:c.isatty(p)}e.formatters.o=function(i){return this.inspectOpts.colors=this.useColors,f.inspect(i,this.inspectOpts).split(`
`).map(function(t){return t.trim()}).join(" ")},e.formatters.O=function(i){return this.inspectOpts.colors=this.useColors,f.inspect(i,this.inspectOpts)};function m(i){var t=this.namespace,d=this.useColors;if(d){var u=this.color,w="  \x1B[3"+u+";1m"+t+" \x1B[0m";i[0]=w+i[0].split(`
`).join(`
`+w),i.push("\x1B[3"+u+"m+"+e.humanize(this.diff)+"\x1B[0m")}else i[0]=new Date().toUTCString()+" "+t+" "+i[0]}function a(){return v.write(f.format.apply(f,arguments)+`
`)}function r(i){i==null?delete process.env.DEBUG:process.env.DEBUG=i}function n(){return process.env.DEBUG}function s(i){var t,d=process.binding("tty_wrap");switch(d.guessHandleType(i)){case"TTY":t=new c.WriteStream(i),t._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":var u=G;t=new u.SyncWriteStream(i,{autoClose:!1}),t._type="fs";break;case"PIPE":case"TCP":var w=L;t=new w.Socket({fd:i,readable:!1,writable:!0}),t.readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=i,t._isStdio=!0,t}function l(i){i.inspectOpts={};for(var t=Object.keys(e.inspectOpts),d=0;d<t.length;d++)i.inspectOpts[t[d]]=e.inspectOpts[t[d]]}e.enable(n())}(_,_.exports)),_.exports}typeof process<"u"&&process.type==="renderer"?E.exports=Z():E.exports=H();var K=E.exports,O=N,Y=P.spawn,W=K("electron-squirrel-startup"),C=h.app,U=function(o,e){var c=O.resolve(O.dirname(process.execPath),"..","Update.exe");W("Spawning `%s` with args `%s`",c,o),Y(c,o,{detached:!0}).on("close",e)},Q=function(){if(process.platform==="win32"){var o=process.argv[1];W("processing squirrel command `%s`",o);var e=O.basename(process.execPath);if(o==="--squirrel-install"||o==="--squirrel-updated")return U(["--createShortcut="+e],C.quit),!0;if(o==="--squirrel-uninstall")return U(["--removeShortcut="+e],C.quit),!0;if(o==="--squirrel-obsolete")return C.quit(),!0}return!1},X=Q();const x=J(X);x&&h.app.quit();const j=()=>{const o=new h.BrowserWindow({width:800,height:600,webPreferences:{preload:k.join(__dirname,"preload.js")}});o.setMenuBarVisibility(!1),o.maximize(),o.loadFile(k.join(__dirname,"../renderer/main_window/index.html")),o.menuBarVisible(!1),o.maximize()};h.ipcMain.handle("get_Backend_Address",()=>process.env.VITE_BACK_ADDRESS);h.app.whenReady().then(()=>{j(),h.app.on("activate",()=>{h.BrowserWindow.getAllWindows().length===0&&j()})});h.app.on("window-all-closed",()=>{process.platform!=="darwin"&&h.app.quit()});
